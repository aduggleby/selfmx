---
interface NavSection {
  title: string;
  items: { href: string; label: string }[];
}

const sections: NavSection[] = [
  {
    title: "Getting Started",
    items: [
      { href: "/getting-started", label: "Overview" },
      { href: "/getting-started/installation", label: "Installation" },
      { href: "/getting-started/quick-start", label: "Quick Start" },
      { href: "/getting-started/basic-usage", label: "Basic Usage" },
    ],
  },
  {
    title: "Configuration",
    items: [
      { href: "/configuration", label: "Overview" },
      { href: "/configuration/environment", label: "Environment Variables" },
      { href: "/configuration/smtp", label: "SMTP Settings" },
      { href: "/configuration/database", label: "Database Options" },
    ],
  },
  {
    title: "API Reference",
    items: [
      { href: "/api", label: "Overview" },
      { href: "/api/authentication", label: "Authentication" },
      { href: "/api/endpoints", label: "Endpoints" },
      { href: "/api/webhooks", label: "Webhooks" },
    ],
  },
  {
    title: "Concepts",
    items: [
      { href: "/concepts", label: "Overview" },
      { href: "/concepts/architecture", label: "Architecture" },
      { href: "/concepts/email-processing", label: "Email Processing" },
      { href: "/concepts/tenants", label: "Multi-Tenancy" },
    ],
  },
  {
    title: "Guides",
    items: [
      { href: "/guides", label: "Overview" },
      { href: "/guides/deployment", label: "Deployment" },
      { href: "/guides/monitoring", label: "Monitoring" },
      { href: "/guides/troubleshooting", label: "Troubleshooting" },
    ],
  },
];

const currentPath = Astro.url.pathname;
---

<aside class="w-64 shrink-0">
  <nav class="sticky top-8 space-y-6">
    {
      sections.map((section) => (
        <div>
          <h3 class="mb-2 text-xs font-semibold tracking-wider text-zinc-400 uppercase dark:text-zinc-500">
            {section.title}
          </h3>
          <ul class="space-y-1">
            {section.items.map((item) => {
              const isActive = currentPath === item.href || currentPath === item.href + "/";
              return (
                <li>
                  <a
                    href={item.href}
                    class:list={[
                      "block rounded-md px-3 py-1.5 text-sm transition-colors",
                      isActive
                        ? "bg-green-50 font-medium text-green-700 dark:bg-green-900/30 dark:text-green-400"
                        : "text-zinc-600 hover:bg-zinc-100 hover:text-zinc-900 dark:text-zinc-400 dark:hover:bg-zinc-800 dark:hover:text-zinc-200",
                    ]}
                  >
                    {item.label}
                  </a>
                </li>
              );
            })}
          </ul>
        </div>
      ))
    }
  </nav>
</aside>
